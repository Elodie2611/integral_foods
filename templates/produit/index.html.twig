{% extends 'base.html.twig' %}

{% block title %}Nos produits{% endblock %}

{% block body %}

	<h1 class="text-center mb-5 mt-5">Liste des produits</h1>

	<div class="container table-responsive">

		{% if produits %}
		<table class="table table-hover text-center">
		  <thead>
		    <tr>
		      <th scope="col">Catégorie</th>
		      <th scope="col">Description</th>
		      <th scope="col">Nom</th>
		      <th scope="col">Référence</th>
		      <th scope="col">Code Barre</th>
{# ajout d'une case #}
		      <th scope="col">Image</th>
		      <th scope="col">Afficher</th>	      
		      <th scope="col">Modifier</th>
		      <th scope="col">Supprimer</th>
		    </tr>
		  </thead>
		  <tbody class="text-center">
		  	{% for produit in produits %}
			    <tr>
			      <td>
			      	{% for nom in libelle %}
			      		{% if produit.idCategorie == nom.id %}			      		
			      			{{ nom.libelle }}
			      		{% endif %}			      		
			      	{% endfor %}
			      </td>
			      <td>{{ produit.description }} </td>
			      <td>{{ produit.nom }} </td>
			      <td>{{ produit.reference }} </td>
			      <td>{{ produit.EAN }} </td>
{# modification de l'affichage de l'image en dynamique et du alt dans la balise img #}
			      <td><img src="{{ asset('uploads/') ~ produit.photo }}" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure."></td>
			      
			      <td>
			      	<a class="btn btn-sm btn-light" href="/produit/{{ produit.id }}">Afficher infos</a>
			      </td>
			      
			      <td>
			      	<a class="btn btn-sm btn-success" href="/produit/modifier/{{ produit.id }}">Modifier</a>
			      </td>
			      <td>
			      	<a class="btn btn-sm btn-danger" href="/produit/supprimer/{{ produit.id }}">Supprimer</a>
			      </td>
			    </tr>
			{% endfor %}
		  </tbody>
		</table>
		{% else %}
			Pas de produits à afficher
		{% endif %}
	</div>

	<div class="container mb-5 text-center">
		<a href="/produit/ajouter" class="btn btn-light mr-5">Ajouter un nouveau produit</a>
	</div>

	<div class="container mb-5 text-center">
		<a href="/../utilisateur" class="btn btn-light">Afficher les utilisateurs</a>
		<a href="/../categorie" class="btn btn-light">Afficher les catégories</a>
		<a href="/../prix" class="btn btn-light">Afficher les prix</a>
	</div>


{% endblock %}
